<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: color.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: color.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>class RGBAColor {
    #value;
    constructor(r = 0, g = 0, b = 0, a = 1) {
        if (r > 1 &amp;&amp; g > 1 &amp;&amp; b > 1) {
            r /= 255;
            g /= 255;
            b /= 255;
            if (a > 1) {
                a /= 255;
            }
        }
        this.#value = [r, g, b, a];
    }

    set r(value) {
        this.#value[0] = value;
    }

    set g(value) {
        this.#value[1] = value;
    }

    set b(value) {
        this.#value[2] = value;
    }

    set a(value) {
        this.#value[3] = value;
    }

    get r() {
        return this.#value[0];
    }

    get g() {
        return this.#value[1];
    }

    get b() {
        return this.#value[2];
    }

    get a() {
        return this.#value[3];
    }

    get value() {
        return this.#value;
    }

    get brightness() {
        // #Standard
        // LuminanceA = (0.2126*R) + (0.7152*G) + (0.0722*B)
        // #Percieved A
        // LuminanceB = (0.299*R + 0.587*G + 0.114*B)
        // #Perceived B, slower to calculate
        // LuminanceC = sqrt(0.299*(R**2) + 0.587*(G**2) + 0.114*(B**2))


        let [r, g, b, a] = this.#value;
        return (0.2126 * r) + (0.7152 * g) + (0.0722 * b);
    }

    set brightness(value) {
        this.#value = [value, value, value, 1];
    }

    set(r, g, b, a) {
        this.#value = [r, g, b, a]
    }

    setColor(color) {
        this.#value = [color.r, color.g, color.b, color.a];
    }

    add(color) {
        let [r, g, b, a] = this.#value;
        //this.#value = [(r + color.r)/2, (g + color.g)/2, (b + color.b)/2, (a + color.a)/2];
        //this.#value = [(r*a + color.r*color.a), (g*a + color.g*color.a), (b*a + color.b*color.a), 1];
        this.#value = [(r + color.r), (g + color.g), (b + color.b), (a + color.a)];


    }

    blend(color) {
        let [r0, g0, b0, a0] = this.#value;
        let [r1, b1, g1, a1] = color.value;

        let a01 = (1 - a0) * a1 + a0

        let r01 = ((1 - a0) * a1 * r1 + a0 * r0) / a01

        let g01 = ((1 - a0) * a1 * g1 + a0 * g0) / a01

        let b01 = ((1 - a0) * a1 * b1 + a0 * b0) / a01

        this.#value = [r01, g01, b01, a01];
    }


    additive(color) {
        // https://gist.github.com/JordanDelcros/518396da1c13f75ee057
        let base = this.#value;
        let added = color.value;

        let mix = [];
        mix[3] = 1 - (1 - added[3]) * (1 - base[3]); // alpha
        mix[0] = Math.round((added[0] * added[3] / mix[3]) + (base[0] * base[3] * (1 - added[3]) / mix[3])); // red
        mix[1] = Math.round((added[1] * added[3] / mix[3]) + (base[1] * base[3] * (1 - added[3]) / mix[3])); // green
        mix[2] = Math.round((added[2] * added[3] / mix[3]) + (base[2] * base[3] * (1 - added[3]) / mix[3])); // blue

        this.#value = mix;
    }

    equal(color) {
        return (this.#value[0] == color.r) &amp;&amp; (this.#value[1] == color.g) &amp;&amp; (this.#value[2] == color.b) &amp;&amp; (this.#value[3] == color.a);
    }


    static average(colors) {
        // https://sighack.com/post/averaging-rgb-colors-the-right-way
        let r = 0, g = 0, b = 0, a = 0;
        for (let index = 0; index &lt; colors.length; index++) {
            const color = colors[index];
            //if (!color.isNull()) {
                r += color.r * color.r;
                g += color.g * color.g;
                b += color.b * color.b;
                //a += color.a * color.a;
            //}
        }
        return new RGBAColor(
            Math.sqrt(r / colors.length),
            Math.sqrt(g / colors.length),
            Math.sqrt(b / colors.length)
            //Math.sqrt(a),
        );
    }

    static difference(c1, c2) {
        let r = 0;
        let g = 0;
        let b = 0;
        if(c1 &amp;&amp; !c1.isNull() &amp;&amp; c2 &amp;&amp; !c2.isNull()){
            const { r: r1, g: g1, b: b1 } = c1;
            const { r: r2, g: g2, b: b2 } = c2;
            r = r1 - r2;
            g = g1 - g2;
            b = b1 - b2;
        }

        return new RGBAColor(r, g, b);
    }

    isNull() {
        const [r, g, b, a] = this.#value;
        return !(isNaN(r) &amp;&amp; isNaN(g) &amp;&amp; isNaN(b) &amp;&amp; isNaN(a))
    }

    static colorRGBEuclideanDistance(c1, c2) {
        return Math.sqrt(Math.pow(c1.r - c2.r, 2) +
            Math.pow(c1.g - c2.g, 2) +
            Math.pow(c1.b - c2.b, 2));
    }

    /**
     * Checks how close two colors are. Closest is `0`.
     * @param {RGBAColor} color : Color to check distance;
     * @returns Number distace up to `1.42` I think...
     */
    euclideanDistance(color) {
        const [r, g, b] = this.#value;
        return Math.sqrt(Math.pow(r - color.r, 2) +
            Math.pow(g - color.g, 2) +
            Math.pow(b - color.b, 2));
    }

    static getClosestColorInPalette(color, palette) {
        if(!palette){
            throw('Palette should be an array of `RGBA`s')
        }
        let distance = 100;
        let selectedColor = null;
        palette.forEach(paletteColor => {
            let currentDistance = color.euclideanDistance(paletteColor);
            if (currentDistance &lt; distance) {
                selectedColor = paletteColor;
                distance = currentDistance;
            }
        })
        return selectedColor;
    }
}

export default RGBAColor;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module.exports.html">exports</a></li><li><a href="module.exports_module.exports.html">exports</a></li></ul><h3>Global</h3><ul><li><a href="global.html#add">add</a></li><li><a href="global.html#addAudio">addAudio</a></li><li><a href="global.html#addBindingTexture">addBindingTexture</a></li><li><a href="global.html#addEventListener">addEventListener</a></li><li><a href="global.html#addLayers">addLayers</a></li><li><a href="global.html#addPoint">addPoint</a></li><li><a href="global.html#addRenderPass">addRenderPass</a></li><li><a href="global.html#addSampler">addSampler</a></li><li><a href="global.html#addStorage">addStorage</a></li><li><a href="global.html#addStorageMap">addStorageMap</a></li><li><a href="global.html#addTexture2d">addTexture2d</a></li><li><a href="global.html#addTextureImage">addTextureImage</a></li><li><a href="global.html#addTextureVideo">addTextureVideo</a></li><li><a href="global.html#addTextureWebcam">addTextureWebcam</a></li><li><a href="global.html#addUniform">addUniform</a></li><li><a href="global.html#bloom">bloom</a></li><li><a href="global.html#blur">blur</a></li><li><a href="global.html#chromaticAberration">chromaticAberration</a></li><li><a href="global.html#color">color</a></li><li><a href="global.html#createScreen">createScreen</a></li><li><a href="global.html#delta">delta</a></li><li><a href="global.html#filmgrain">filmgrain</a></li><li><a href="global.html#getDelta">getDelta</a></li><li><a href="global.html#grayscale">grayscale</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#isArray">isArray</a></li><li><a href="global.html#lensDistortion">lensDistortion</a></li><li><a href="global.html#pixelate">pixelate</a></li><li><a href="global.html#setAudio">setAudio</a></li><li><a href="global.html#setBindingTexture">setBindingTexture</a></li><li><a href="global.html#setLayers">setLayers</a></li><li><a href="global.html#setMeshDensity">setMeshDensity</a></li><li><a href="global.html#setSampler">setSampler</a></li><li><a href="global.html#setStorage">setStorage</a></li><li><a href="global.html#setStorageMap">setStorageMap</a></li><li><a href="global.html#setTexture2d">setTexture2d</a></li><li><a href="global.html#setTextureImage">setTextureImage</a></li><li><a href="global.html#setTextureImageArray">setTextureImageArray</a></li><li><a href="global.html#setTextureString">setTextureString</a></li><li><a href="global.html#setTextureVideo">setTextureVideo</a></li><li><a href="global.html#setTextureWebcam">setTextureWebcam</a></li><li><a href="global.html#setUniform">setUniform</a></li><li><a href="global.html#sprite">sprite</a></li><li><a href="global.html#strToCodes">strToCodes</a></li><li><a href="global.html#strToImage">strToImage</a></li><li><a href="global.html#time">time</a></li><li><a href="global.html#updateStorageMap">updateStorageMap</a></li><li><a href="global.html#updateTextureImage">updateTextureImage</a></li><li><a href="global.html#updateUniform">updateUniform</a></li><li><a href="global.html#updateUniforms">updateUniforms</a></li><li><a href="global.html#waves">waves</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Jul 31 2025 11:46:56 GMT-0600 (Central Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
